/* Copyright (c) Fortanix, Inc.
|* This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of
|* the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/. */

@use 'sass:math';
@use '../../../style/variables.scss' as *;


@layer baklava.legacy {
  .bkl-sidebar {
    $sidebar-width-expanded: 15.7rem;
    $sidebar-width-collapsed: 5.1rem;
    $collapse-duration: 300ms;
    
    position: sticky;
    inset-block-start: $sizing-0;
    overflow-x: hidden;
    overflow-y: auto;
    inline-size: $sidebar-width-expanded;
    padding: 0 1.4rem;
    
    // Set the sidebar to cover the whole viewport height.
    block-size: 100vh;
    // Note: there is an issue on iOS, where `100vh` covers more than the visible viewport
    // https://stackoverflow.com/questions/37112218/css3-100vh-not-constant-in-mobile-browser
    //height: -webkit-fill-available;
    
    transition: width $collapse-duration cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--sidebar-background);
    color: var(--bkl-dark-color-1);
    
    .logo {
      .logo-image {
        display: block;
        margin-block-start: 2 * $sizing-3;
        margin-inline-start: $sizing-3;
        
        &:focus-visible {
          outline: 2px solid $focus-outline-color;
          outline-offset: 0;
        }
      }
      
      img {
        block-size: 2.9rem;
      }
    }
    
    &--collapsed {
      inline-size: $sidebar-width-collapsed;
      
      .logo {
        .logo-image {
          margin-inline-start: $sizing-0;
        }
        
        img {
          block-size: 4.3rem;
          inline-size: auto;
        }
      }
    }
    
    &--collapsed-button {
      padding: 0 !important;
      position: absolute;
      inset-block-end: 1.4rem;
      
      .bkl-icon {
        z-index: 1;
        inline-size: 1.4rem;
        block-size: 1.4rem;
        cursor: pointer;
      }
    }
    
    &-tooltip {
      color: var(--bkl-dark-color-1);
      background: var(--sidebar-tooltip-background);
      
      .bkl-tooltip__arrow::after {
        background: var(--sidebar-tooltip-background);
      }
    }
  }
}
