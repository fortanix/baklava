/* Copyright (c) Fortanix, Inc.
|* This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of
|* the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/. */

@use '../../../style/variables.scss' as bkl;
@use '../../../style/mixins.scss' as mixins;
@use '../../../style/accessibility.scss' as accessibility;

@mixin switcher-button-reset() {
  font-size: 100%;
  font-family: inherit;
  border: 0;
  padding: 0;
  background: transparent;
}

@layer baklava.legacy {
  .bkl-switcher-buttons {
    overflow: hidden;
    
    border: bkl.$sizing-hairline solid bkl.$neutral-color-1;
    border-radius: bkl.$border-radius-s;
    
    display: inline-flex;
    
    .bkl-switcher-button {
      @include switcher-button-reset();
      $button-width: bkl.$sizing-4 * 10;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: bkl.$sizing-xs * 1.5;
      
      padding: 0.9rem;
      padding-block-end: 0.8rem;
      background: transparent;
      min-inline-size: $button-width + bkl.$sizing-2 + bkl.$sizing-1;
      
      &:not(:first-of-type) {
        border-inline-start: bkl.$sizing-hairline solid bkl.$neutral-color-1;
      }
      
      color: bkl.$neutral-color-3;
      @include mixins.font($family: bkl.$font-family-display, $weight: bkl.$font-weight-regular);
      font-size: bkl.$font-size-s;
      @include accessibility.focus-inset;
      
      &.pseudo-focus-visible {
        @include accessibility.focus-inset;
      }
      
      &.active {
        background: bkl.$neutral-color-4;
      }
      
      &.disabled {
        background: bkl.$light-color-5;
        cursor: not-allowed;
      }
      
      .count {
        @include mixins.capsule();
        padding: bkl.$sizing-hairline 0.6rem;
        min-inline-size: unset;
        background: var(--bkl-switcher-bg-color);
        color: bkl.$neutral-color-2;
        font-size: bkl.$font-size-xs;
      }
      
      transition: background-color 120ms ease;
      &:not(.active, .disabled):hover {
        background: var(--bkl-switcher-bg-color-1);
      }
      
      &.active .count {
        background: bkl.$light-color-1;
        box-shadow: 0 bkl.$sizing-hairline bkl.$sizing-hairline 0 bkl.$neutral-color-1; // Slight shadow to help with contrast
      }
    }
  }
}
