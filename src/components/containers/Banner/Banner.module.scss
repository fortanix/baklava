/* Copyright (c) Fortanix, Inc.
|* This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of
|* the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/. */

@use '../../../styling/defs.scss' as bk;

@layer baklava.components {
  .bk-banner {
    @include bk.component-base(bk-banner);
    
    --bk-banner-color-foreground: #{bk.$theme-banner-informational-border-default};
    --bk-banner-color-background: #{bk.$theme-banner-informational-background-default};
    --bk-banner-border-radius: #{bk.$radius-2};
    --bk-banner-indent: #{bk.$spacing-9};
    
    overflow: hidden;
    
    padding-block: bk.$spacing-2;
    padding-inline: bk.$spacing-4 - bk.$radius-2;
    padding-inline-start: var(--bk-banner-indent); // Indent all of the content (e.g. for when the message wraps)
    
    border: bk.$size-1 var(--bk-banner-color-foreground) solid;
    border-inline-start-width: var(--bk-banner-border-radius); // Thicker border extending as far as the radius
    border-radius: var(--bk-banner-border-radius);
    background: var(--bk-banner-color-background);
    
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: bk.$spacing-4;
    
    min-width: 0;
    
    @include bk.font(bk.$font-family-body, bk.$font-weight-regular, bk.$font-size-m);
    line-height: bk.$line-height-m;
    color: bk.$theme-banner-text-default;
    
    .bk-banner__content {
      margin-inline-end: auto; // Space between text and actions
      
      min-width: 0;
      display: flex;
      flex-flow: row wrap;
      gap: bk.$spacing-1;
      
      .bk-banner__title {
        $icon-size: 1.3em;
        margin-inline-start: calc(-1 * (bk.$spacing-2 + $icon-size));
        
        min-width: 0;
        display: flex;
        flex-direction: row;
        gap: bk.$spacing-2;
        align-items: center;
        
        font-weight: bk.$font-weight-semibold;
        
        .bk-banner__title__icon {
          color: var(--bk-banner-color-foreground);
        }
        
        .bk-banner__title__text {
          @include bk.text-one-line;
        }
      }
      
      .bk-banner__message {
        --keep: ;
      }
    }
    
    .bk-banner__actions {
      display: flex;
      flex-direction: row-reverse;
      align-items: center;
      gap: bk.$spacing-1 bk.$spacing-7;
      
      > * {
        // Keep each item to a max of 1lh, so that in the case of all items being on one line, all the items
        // are properly aligned with the title (which implicitly has height `1lh`).
        max-height: 1lh;
      }
      
      .bk-banner__action {
        display: flex;
        flex-direction: row;
        align-items: center;
        
        button {
          border: 0;
          font-weight: bk.$font-weight-semibold;
          padding: 0;
        }
      }
      
      .bk-banner__close-button {
        flex: none;
        
        display: flex;
        
        font-size: 1.2em;
        color: bk.$theme-banner-icon-default;
      }
    }
    
    // Allow actions to wrap if there is a long message
    &:has(.bk-banner__message) .bk-banner__actions { flex-wrap: wrap; }
    
    // Variants
    &.bk-banner--informational {
      --bk-banner-color-foreground: #{bk.$theme-banner-informational-border-default};
      --bk-banner-color-background: #{bk.$theme-banner-informational-background-default};
    }
    &.bk-banner--warning {
      --bk-banner-color-foreground: #{bk.$theme-banner-warning-border-default};
      --bk-banner-color-background: #{bk.$theme-banner-warning-background-default};
    }
    &.bk-banner--error {
      --bk-banner-color-foreground: #{bk.$theme-banner-alert-border-default};
      --bk-banner-color-background: #{bk.$theme-banner-alert-background-default};
    }
    &.bk-banner--success {
      --bk-banner-color-foreground: #{bk.$theme-banner-success-border-default};
      --bk-banner-color-background: #{bk.$theme-banner-success-background-default};
    }
  }
}
