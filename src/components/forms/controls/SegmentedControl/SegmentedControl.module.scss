/* Copyright (c) Fortanix, Inc.
|* This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of
|* the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/. */

@use '../../../../styling/defs.scss' as bk;

@layer baklava.components {
  .bk-segmented-control {
    @include bk.component-base(bk-segmented-control);
    
    display: flex;
    
    .bk-segmented-control__button {
      --bk-segmented-control-toggle-background-color: #{bk.$theme-segmented-control-background-default};
      --bk-segmented-control-toggle-border-color: #{bk.$theme-segmented-control-border-unselected};
      --bk-segmented-control-toggle-text-color: #{bk.$theme-segmented-control-text-unselected};
      
      user-select: none;
      
      padding: bk.$spacing-1 bk.$spacing-3;
      background-color: var(--bk-segmented-control-toggle-background-color);
      border: bk.rem-from-px(1) solid var(--bk-segmented-control-toggle-border-color);
      border-inline-start: 0;
      
      color: var(--bk-segmented-control-toggle-text-color);
      font-weight: bk.$font-weight-semibold;
      text-transform: uppercase;
      
      &:active {
        filter: brightness(90%);
      }
      
      @media (prefers-reduced-motion: no-preference) {
        transition: filter 100ms ease-out;
      }
    }
    
    .bk-segmented-control__item {
      &:first-child {
        .bk-segmented-control__button {
          border-inline-start: bk.rem-from-px(1) solid var(--bk-segmented-control-toggle-border-color);
          border-radius: bk.$radius-1 0 0 bk.$radius-1;
        }
      }
      
      &:last-child {
        .bk-segmented-control__button {
          border-radius: 0 bk.$radius-1 bk.$radius-1 0;
        }
      }
    }
    
    /* States */
    &:not(.bk-segmented-control--disabled) {
      .bk-segmented-control__button:not(:disabled) {
        &[aria-checked="true"] {
          --bk-segmented-control-toggle-background-color: #{bk.$theme-segmented-control-background-selected};
          //--bk-segmented-control-toggle-border-color: #{bk.$theme-segmented-control-border-selected};
          --bk-segmented-control-toggle-text-color: #{bk.$theme-segmented-control-text-default};
        }
        
        &:not(:is([aria-checked="true"])):is(:hover, :global(.pseudo-hover)) {
          --bk-segmented-control-toggle-background-color: #{bk.$theme-segmented-control-background-hover};
        }
        
        --bk-focus-outline-color: #{bk.$theme-segmented-control-border-focus};
        @include bk.focus-outset;
        &:is(:focus-visible, :global(.pseudo-focus-visible)) {
          position: relative; // Have the focused toggle render over the other toggles so that the focus is fully shown
          border-inline-start: bk.rem-from-px(1) solid var(--bk-segmented-control-toggle-border-color);
          border-radius: bk.$radius-2;
        }
      }
    }
    
    :is(&.bk-segmented-control--disabled .bk-segmented-control__button, .bk-segmented-control__button:disabled) {
      --bk-segmented-control-toggle-background-color: #{bk.$theme-segmented-control-background-disabled-2};
      --bk-segmented-control-toggle-border-color: #{bk.$theme-segmented-control-border-disabled};
      --bk-segmented-control-toggle-text-color: #{bk.$theme-segmented-control-text-unselected-2};
      cursor: not-allowed;
      
      &[aria-checked="true"] {
        --bk-segmented-control-toggle-background-color: #{bk.$theme-segmented-control-background-disabled};
      }
    }
  }
}
